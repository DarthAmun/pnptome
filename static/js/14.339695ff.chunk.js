(this.webpackJsonppnptome=this.webpackJsonppnptome||[]).push([[14],{563:function(e,t,n){"use strict";n.r(t);var a,c,r,s,i,o,l,b=n(11),j=n(26),u=n(1),d=n(15),p=n(12),O=n(66),f=n(67),h=n(45),x=n(82),m=n(456),v=n(564),y=n(565),w=n(412),g=n(466),k=n(410),S=n(414),C=n(91),E=n(14),A=n.n(E),N=n(68),B=n(19),D=function(){var e=Object(B.a)(A.a.mark((function e(t,n,a,c,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(C.g)(t,n,a,c,(function(e){var t=Object(N.a)({},n,e);P(t,r)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r){return e.apply(this,arguments)}}(),I=function(){var e=Object(B.a)(A.a.mark((function e(t,n,a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(C.f)(t,n,(function(e){var t=Object(N.a)({},n,e);P(t,a)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(B.a)(A.a.mark((function e(t,n,a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("Get all"),e.next=3,Object(C.j)(t,"notes");case 3:e.sent,a(50),console.timeEnd("Get all"),console.time("Remove Base64 Images"),console.timeEnd("Remove Base64 Images"),a(85),a(100);case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),P=function(e,t){var n=window.URL.createObjectURL(new Blob([JSON.stringify(e)])),a=document.createElement("a");a.href=n,a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a)},_=n(57),F=n(32),J=n(457),T=function(e){if("spells"===e.tableName){if(e.newEntitiy.text&&!Array.isArray(e.newEntitiy.classes)){var t=e.newEntitiy;return t.description=t.text,delete t.text,t.classes=t.classes.replaceAll(" ","").split(","),Object(_.a)(Object(_.a)({},e),{},{newEntitiy:t})}return e}return e},U=function(e,t,n){if(t.blobFile){var a=new FileReader;a.onloadend=function(){var c=a.result;if(null!==c){var r=JSON.parse(c.toString());console.log("Json loaded from "+t.name),n(e,r),console.log("---------")}},a.readAsText(t.blobFile)}},G=function(e,t){for(var n=[],a=0,c=Object.entries(t);a<c.length;a++){var r=Object(j.a)(c[a],2),s=r[0],i=r[1];if(Array.isArray(i)){var o,l=Object(J.a)(i);try{for(l.s();!(o=l.n()).done;){var b=o.value;n=[].concat(Object(F.a)(n),[{tableName:s,newEntitiy:b}])}}catch(u){l.e(u)}finally{l.f()}}}n=W(n),H(e,n)},L=function(e,t){for(var n=[],a=0,c=Object.entries(t);a<c.length;a++){var r=Object(j.a)(c[a],2),s=r[0],i=r[1];if(Array.isArray(i)){var o="classes"===s||"subclasses"===s?s.replace("es",""):s.slice(0,-1);if("spell"===o){var l,b=Object(J.a)(i);try{for(b.s();!(l=b.n()).done;){var u=l.value,d=u.classes.split(",").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()})),p=Object(_.a)(Object(_.a)({},u),{},{class:d});delete p.classes,n=[].concat(Object(F.a)(n),[{tableName:o,newEntitiy:p}])}}catch(g){b.e(g)}finally{b.f()}}else if("race"===o){var O,f=Object(J.a)(i);try{for(f.s();!(O=f.n()).done;){var h=O.value,x=h.abilityscores.split(",").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()}));x=x.filter((function(e){return e.includes("+")}));var m=Object(_.a)(Object(_.a)({},h),{},{abilityscores:x});n=[].concat(Object(F.a)(n),[{tableName:o,newEntitiy:m}])}}catch(g){f.e(g)}finally{f.f()}}else{var v,y=Object(J.a)(i);try{for(y.s();!(v=y.n()).done;){var w=v.value;n=[].concat(Object(F.a)(n),[{tableName:o,newEntitiy:w}])}}catch(g){y.e(g)}finally{y.f()}}}}n=W(n),H(e,n)},H=function(){var e=Object(B.a)(A.a.mark((function e(t,n){var a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(F.a)(n),c=A.a.mark((function e(){var n,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a[0].tableName,c=a.filter((function(e){return e.tableName===n})).map((function(e){return e.newEntitiy})),console.log(t,n,c),e.next=5,Object(C.s)(t,n,c);case 5:a=a.filter((function(e){return e.tableName!==n}));case 6:case"end":return e.stop()}}),e)}));case 2:if(!(a.length>0)){e.next=6;break}return e.delegateYield(c(),"t0",4);case 4:e.next=2;break;case 6:console.log("Done saving");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(e){var t,n=[],a=Object(J.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value,r=T(c);n.push(r)}}catch(s){a.e(s)}finally{a.f()}return n},Y=n(8),M=n(18),q=n(47),z=n(53),K=n(3),Q=(t.default=function(){var e=Object(p.g)(),t=Object(M.c)((function(e){return e.system})),n=Object(M.c)(q.b),a=Object(u.useState)(!1),c=Object(j.a)(a,2),r=c[0],s=c[1],i=Object(u.useState)([]),o=Object(j.a)(i,2),l=o[0],b=o[1],S=Object(u.useState)(0),E=Object(j.a)(S,2),A=E[0],N=E[1],B=Object(u.useState)(),P=Object(j.a)(B,2),_=P[0],F=P[1],J=Object(u.useState)([]),T=Object(j.a)(J,2),H=T[0],W=T[1],Y=Object(u.useState)(0),ne=Object(j.a)(Y,2),ae=ne[0],ce=ne[1],re=Object(u.useState)(""),se=Object(j.a)(re,2),ie=se[0],oe=se[1],le=Object(u.useState)(""),be=Object(j.a)(le,2),je=be[0],ue=be[1],de=Object(u.useState)([]),pe=Object(j.a)(de,2),Oe=pe[0],fe=pe[1],he=Object(u.useState)(localStorage.getItem("webhook")+""),xe=Object(j.a)(he,2),me=xe[0],ve=xe[1],ye=Object(u.useState)(localStorage.getItem("webhook_user")+""),we=Object(j.a)(ye,2),ge=we[0],ke=we[1];Object(u.useEffect)((function(){me!==localStorage.getItem("webhook")&&localStorage.setItem("webhook",me)}),[me]),Object(u.useEffect)((function(){ge!==localStorage.getItem("webhook_user")&&localStorage.setItem("webhook_user",ge)}),[ge]);Object(u.useEffect)((function(){_?(Se(t,_),Object(C.m)(n,_,(function(e){ce(e)}))):t.entities.length>0&&F(t.entities[0].entityName)}),[_,t]);var Se=Object(u.useCallback)((function(e,t){var n=[],a=[];e.entities.forEach((function(e){n.push({value:e.entityName,label:Object(z.a)(e.entityName)}),e.entityName===t&&e.attributes.forEach((function(e){a.push({value:e,label:e})}))})),console.log(n,a),W(n),fe(a)}),[_,t]);return Object(K.jsx)(Q,{children:Object(K.jsxs)(V,{children:[Object(K.jsxs)(h.a,{open:r,onClose:function(){return s(!1)},children:[Object(K.jsx)(h.a.Header,{children:Object(K.jsx)(h.a.Title,{children:"Attention"})}),Object(K.jsx)(h.a.Body,{children:"Are you sure you want to rest the database and delete all data stored?"}),Object(K.jsxs)(h.a.Footer,{children:[Object(K.jsx)(x.a,{onClick:function(){return Object(C.d)(n),s(!1),void O.a.push(Object(K.jsx)(f.a,{closable:!0,header:"Success",type:"success",children:"Success: Reset Database."}),{placement:"bottomStart"})},appearance:"primary",children:"Yes, reset!"}),Object(K.jsx)(x.a,{onClick:function(){return s(!1)},appearance:"subtle",children:"Cancel"})]})]}),Object(K.jsx)(m.a,{children:"General"}),Object(K.jsxs)(X,{children:[Object(K.jsx)(Z,{header:"Import Backup(.pnptome or .json)",children:Object(K.jsx)(v.a,{fileList:l,action:e.pathname,draggable:!0,multiple:!0,autoUpload:!0,onUpload:function(e){!function(e,t){var n;console.log(e,t);var a=null===(n=t.name)||void 0===n?void 0:n.split(".");if(a)switch(a[a.length-1]){case"json":U(e,t,L);break;case"pnptome":U(e,t,G)}}(n,e)},onSuccess:function(e,t){O.a.push(Object(K.jsxs)(f.a,{closable:!0,header:"Success",type:"success",children:["Success: Imported ",t.name,"."]}),{placement:"bottomStart"})},onChange:b,accept:".pnptome, .json",children:Object(K.jsx)("div",{style:{lineHeight:"100px"},children:"Click or Drag files to this area to upload"})})}),Object(K.jsx)(Z,{header:"Backup (.pnptome)",children:Object(K.jsxs)($,{children:["Create a backup of the database with all the homebrew in it to download.",Object(K.jsx)("br",{}),Object(K.jsx)("br",{}),Object(K.jsxs)(x.a,{appearance:"primary",onClick:function(){return R(n,"PnPTome_all.pnptome",N)},children:[Object(K.jsx)(d.j,{})," Download Backup"]}),A>0&&Object(K.jsx)(y.a,{percent:A,strokeColor:"#F55C5C"})]})}),Object(K.jsx)(Z,{header:"Reset Database",children:Object(K.jsxs)($,{children:["Reset the database which will result in all data been permanently deleted.",Object(K.jsx)("br",{}),Object(K.jsx)("br",{}),Object(K.jsxs)(x.a,{appearance:"primary",onClick:function(){return s(!0)},children:[Object(K.jsx)(d.B,{})," Reset Database"]})]})})]}),Object(K.jsx)(m.a,{children:"Data Management"}),Object(K.jsx)(X,{children:Object(K.jsxs)(Z,{style:{width:"500px"},children:[Object(K.jsxs)($,{children:[Object(K.jsxs)(w.a,{style:{width:"200px"},children:[Object(K.jsx)(w.a.Addon,{children:"Entity"}),Object(K.jsx)(g.a,{value:_,onChange:F,data:H,cleanable:!1})]}),Object(K.jsx)(m.a,{children:"Filter"}),Object(K.jsxs)(w.a,{style:{width:"200px"},children:[Object(K.jsx)(w.a.Addon,{children:"Attribute"}),Object(K.jsx)(g.a,{value:ie,onChange:oe,data:Oe,style:{width:150},cleanable:!0})]}),Object(K.jsxs)(w.a,{style:{width:"200px"},children:[Object(K.jsx)(w.a.Addon,{children:"="}),Object(K.jsx)(k.a,{value:je,onChange:function(e){return ue(e)}})]})]}),Object(K.jsx)(te,{}),_&&Object(K.jsxs)(ee,{children:[!ie&&Object(K.jsxs)(x.a,{appearance:"primary",onClick:function(){return I(n,_,"PnPTome_".concat(_,".pnptome"))},disabled:""===_,children:[Object(K.jsx)(d.j,{})," Backup all ",ae," ",_]}),ie&&Object(K.jsxs)(x.a,{appearance:"primary",onClick:function(){return D(n,_,ie,je,"PnPTome_".concat(_,"_").concat(ie,"(").concat(je,").pnptome"))},disabled:""===_,children:[Object(K.jsx)(d.j,{})," Backup ",ie,"(",je,") ",_]}),Object(K.jsx)("br",{}),!ie&&Object(K.jsxs)(x.a,{appearance:"primary",onClick:function(){return Object(C.b)(n,_)},disabled:""===_,children:[Object(K.jsx)(d.B,{})," Delete all ",ae," ",_]}),ie&&Object(K.jsxs)(x.a,{appearance:"primary",onClick:function(){return Object(C.c)(n,_,ie,je)},disabled:""===_,children:[Object(K.jsx)(d.B,{})," Delete ",ie,"(",je,") ",_]})]})]})}),Object(K.jsx)(m.a,{children:"Discord"}),Object(K.jsx)(X,{children:Object(K.jsxs)(Z,{header:"Webhook",children:[Object(K.jsxs)(w.a,{children:[Object(K.jsx)(w.a.Addon,{children:"PlayerName"}),Object(K.jsx)(k.a,{value:ge,onChange:function(e){return ke(e)}})]}),Object(K.jsxs)(w.a,{children:[Object(K.jsx)(w.a.Addon,{children:"Webhook"}),Object(K.jsx)(k.a,{value:me,onChange:function(e){return ve(e)}})]})]})})]})})},Y.b.div(a||(a=Object(b.a)(["\n  width: 100%;\n  display: flex;\n"])))),V=Y.b.div(c||(c=Object(b.a)(["\n  width: 100%;\n"]))),X=Y.b.div(r||(r=Object(b.a)(["\n  margin-left: 10px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  justify-content: center;\n"]))),Z=Object(Y.b)(S.a)(s||(s=Object(b.a)(["\n  width: 400px;\n  background-color: ",";\n  border-radius: 10px;\n  box-shadow: ",";\n\n  & .rs-panel-body {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: stretch;\n  }\n\n  & .rs-input-group {\n    margin-bottom: 5px;\n  }\n"])),(function(e){return e.theme.secondColor}),(function(e){return e.theme.mainColor})),$=Y.b.div(i||(i=Object(b.a)(["\n  flex: 1 1;\n"]))),ee=Object(Y.b)($)(o||(o=Object(b.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  gap: 10px;\n"]))),te=Y.b.div(l||(l=Object(b.a)(["\n  flex: 1 1;\n  max-width: 1px;\n  margin: 10px;\n  border-left: 1px solid var(--rs-divider-border);\n"])))}}]);
//# sourceMappingURL=14.339695ff.chunk.js.map