"use strict";(self.webpackChunkpnptome=self.webpackChunkpnptome||[]).push([[427],{82427:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var r,a,o,i,s,c,l,u,d,h=t(17186),f=t(18489),x=t(23430),p=t(72791),Z=t(56355),j=t(16871),m=t(41681),v=t(30972),b=t(6186),y=t(89626),g=t(72760),w=t(60969),C=t(91852),k=t(57214),S=t(15404),A=t(11786),E=t(43846),N=t(79795),P=t(28980),D=t(36222),T=t(33032),I=t(84322),O=t.n(I),B=function(){var e=(0,T.Z)(O().mark((function e(n,t,r,a,o){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,P.EU)(n,t,r,a,(function(e){var n=(0,D.Z)({},t,e);F(n,o)}));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r,a,o){return e.apply(this,arguments)}}(),R=function(){var e=(0,T.Z)(O().mark((function e(n,t,r){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,P.y5)(n,t,(function(e){var n=(0,D.Z)({},t,e);F(n,r)}));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),_=function(){var e=(0,T.Z)(O().mark((function e(n,t,r){var a,o,i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("Get all"),a={},e.next=4,(0,P.j1)(n);case 4:return o=e.sent,i=[],o.forEach((function(e){i.push((0,P.sS)(n,e))})),e.next=9,Promise.all(i).then((function(e){e.forEach((function(e){a[e.name]=e.data}))}));case 9:r(50),console.timeEnd("Get all"),F(a,t),r(100);case 13:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),F=function(e,n){var t=window.URL.createObjectURL(new Blob([JSON.stringify(e)])),r=document.createElement("a");r.href=t,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r)},J=t(35531),M=t(89472),L=function(e){if("spells"===e.tableName){if(e.newEntitiy.text&&!Array.isArray(e.newEntitiy.classes)){var n=e.newEntitiy;return n.description=n.text,delete n.text,n.classes=n.classes.replaceAll(" ","").split(","),(0,f.Z)((0,f.Z)({},e),{},{newEntitiy:n})}return e}return e},U=function(e,n,t){if(n.blobFile){var r=new FileReader;r.onloadend=function(){var a=r.result;if(null!==a){var o=JSON.parse(a.toString());console.log("Json loaded from "+n.name),t(e,o),console.log("---------")}},r.readAsText(n.blobFile)}},$=function(e,n){for(var t=[],r=0,a=Object.entries(n);r<a.length;r++){var o=(0,x.Z)(a[r],2),i=o[0],s=o[1];if(Array.isArray(s)){var c,l=(0,M.Z)(s);try{for(l.s();!(c=l.n()).done;){var u=c.value;t=[].concat((0,J.Z)(t),[{tableName:i,newEntitiy:u}])}}catch(d){l.e(d)}finally{l.f()}}}t=W(t),H(e,t)},G=function(e,n){for(var t=[],r=0,a=Object.entries(n);r<a.length;r++){var o=(0,x.Z)(a[r],2),i=o[0],s=o[1];if(Array.isArray(s)){var c="classes"===i||"subclasses"===i?i.replace("es",""):i.slice(0,-1);if("spell"===c){var l,u=(0,M.Z)(s);try{for(u.s();!(l=u.n()).done;){var d=l.value,h=d.classes.split(",").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()})),p=(0,f.Z)((0,f.Z)({},d),{},{class:h,description:d.text});delete p.classes,delete p.text,t=[].concat((0,J.Z)(t),[{tableName:c,newEntitiy:p}])}}catch(N){u.e(N)}finally{u.f()}}else if("race"===c){var Z,j=(0,M.Z)(s);try{for(j.s();!(Z=j.n()).done;){var m=Z.value,v=m.abilityscores.split(",").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()}));v=v.filter((function(e){return e.includes("+")}));var b=(0,f.Z)((0,f.Z)({},m),{},{abilityscores:v});t=[].concat((0,J.Z)(t),[{tableName:c,newEntitiy:b}])}}catch(N){j.e(N)}finally{j.f()}}else if("subrace"===c){var y,g=(0,M.Z)(s);try{for(g.s();!(y=g.n()).done;){var w=y.value,C=w.abilityscores.split(",").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()})),k=(0,f.Z)((0,f.Z)({},w),{},{abilityscores:C});t=[].concat((0,J.Z)(t),[{tableName:c,newEntitiy:k}])}}catch(N){g.e(N)}finally{g.f()}}else{var S,A=(0,M.Z)(s);try{for(A.s();!(S=A.n()).done;){var E=S.value;t=[].concat((0,J.Z)(t),[{tableName:c,newEntitiy:E}])}}catch(N){A.e(N)}finally{A.f()}}}}t=W(t),H(e,t)},H=function(){var e=(0,T.Z)(O().mark((function e(n,t){var r,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,J.Z)(t),a=O().mark((function e(){var t,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r[0].tableName,a=r.filter((function(e){return e.tableName===t})).map((function(e){return e.newEntitiy})),console.log(n,t,a),e.next=5,(0,P.Ox)(n,t,a);case 5:r=r.filter((function(e){return e.tableName!==t}));case 6:case"end":return e.stop()}}),e)}));case 2:if(!(r.length>0)){e.next=6;break}return e.delegateYield(a(),"t0",4);case 4:e.next=2;break;case 6:console.log("Done saving");case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),W=function(e){var n,t=[],r=(0,M.Z)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=L(a);t.push(o)}}catch(i){r.e(i)}finally{r.f()}return t},V=t(36031),Y=t(59434),q=t(99892),z=t(25488),K=t(85387),Q=t(1753),X=t(80184),ee=function(){var e=(0,j.TH)(),n=(0,Y.I0)(),t=(0,Y.v9)((function(e){return e.system})),r=(0,Y.v9)(q.Vk),a=(0,Y.v9)((function(e){return e.theme})),o=(0,p.useState)(a),i=(0,x.Z)(o,2),s=i[0],c=i[1],l=(0,p.useState)(!1),u=(0,x.Z)(l,2),d=u[0],h=u[1],N=(0,p.useState)(!1),D=(0,x.Z)(N,2),T=D[0],I=D[1],O=(0,p.useState)([]),F=(0,x.Z)(O,2),J=F[0],M=F[1],L=(0,p.useState)(0),H=(0,x.Z)(L,2),W=H[0],V=H[1],ee=(0,p.useState)(),ue=(0,x.Z)(ee,2),de=ue[0],he=ue[1],fe=(0,p.useState)([]),xe=(0,x.Z)(fe,2),pe=xe[0],Ze=xe[1],je=(0,p.useState)(0),me=(0,x.Z)(je,2),ve=me[0],be=me[1],ye=(0,p.useState)(""),ge=(0,x.Z)(ye,2),we=ge[0],Ce=ge[1],ke=(0,p.useState)(""),Se=(0,x.Z)(ke,2),Ae=Se[0],Ee=Se[1],Ne=(0,p.useState)([]),Pe=(0,x.Z)(Ne,2),De=Pe[0],Te=Pe[1],Ie=(0,p.useState)(localStorage.getItem("webhook")+""),Oe=(0,x.Z)(Ie,2),Be=Oe[0],Re=Oe[1],_e=(0,p.useState)(localStorage.getItem("webhook_user")+""),Fe=(0,x.Z)(_e,2),Je=Fe[0],Me=Fe[1];(0,p.useEffect)((function(){Be!==localStorage.getItem("webhook")&&localStorage.setItem("webhook",Be)}),[Be]),(0,p.useEffect)((function(){Je!==localStorage.getItem("webhook_user")&&localStorage.setItem("webhook_user",Je)}),[Je]);(0,p.useEffect)((function(){de?(Le(t,de),(0,P.Gd)(r,de,(function(e){be(e)}))):t.entities.length>0&&he(t.entities[0].entityName)}),[de,t]);var Le=(0,p.useCallback)((function(e,n){var t=[],r=[];e.entities.forEach((function(e){t.push({value:e.entityName,label:(0,z.Z5)(e.entityName)}),e.entityName===n&&e.attributes.forEach((function(e){r.push({value:e,label:e})}))})),Ze(t),Te(r)}),[de,t]);return(0,X.jsx)(ne,{children:(0,X.jsxs)(te,{children:[(0,X.jsxs)(b.Z,{open:d,onClose:function(){return h(!1)},children:[(0,X.jsx)(b.Z.Header,{children:(0,X.jsx)(b.Z.Title,{children:"Attention"})}),(0,X.jsx)(b.Z.Body,{children:"Are you sure you want to rest the database and delete all data stored?"}),(0,X.jsxs)(b.Z.Footer,{children:[(0,X.jsx)(y.Z,{onClick:function(){return(0,P.q3)(r),h(!1),void m.Z.push((0,X.jsx)(v.Z,{closable:!0,header:"Success",type:"success",children:"Success: Reset Database."}),{placement:"bottomStart"})},appearance:"primary",children:"Yes, reset!"}),(0,X.jsx)(y.Z,{onClick:function(){return h(!1)},appearance:"subtle",children:"Cancel"})]})]}),(0,X.jsx)(g.Z,{children:"General"}),(0,X.jsxs)(re,{children:[(0,X.jsx)(ae,{header:"Import '".concat(t.name,"-").concat(t.version,"' Backup(.pnptome or .json)"),children:(0,X.jsx)(w.Z,{fileList:J,action:e.pathname,draggable:!0,multiple:!0,autoUpload:!0,onUpload:function(e){!function(e,n){var t;console.log(e,n);var r=null===(t=n.name)||void 0===t?void 0:t.split(".");if(r)switch(r[r.length-1]){case"json":U(e,n,G);break;case"pnptome":U(e,n,$)}}(r,e)},onSuccess:function(e,n){m.Z.push((0,X.jsxs)(v.Z,{closable:!0,header:"Success",type:"success",children:["Success: Imported ",n.name,"."]}),{placement:"bottomStart"})},onChange:M,accept:".pnptome, .json",children:(0,X.jsx)("div",{style:{lineHeight:"100px"},children:"Click or Drag files to this area to upload"})})}),(0,X.jsx)(ae,{header:"Backup '".concat(t.name,"-").concat(t.version,"' (.pnptome)"),children:(0,X.jsxs)(oe,{children:["Create a backup of the database with all the homebrew in it to download.",(0,X.jsx)("br",{}),(0,X.jsx)("br",{}),(0,X.jsxs)(y.Z,{appearance:"primary",onClick:function(){return _(r,"PnPTome_all.pnptome",V)},children:[(0,X.jsx)(Z.u$v,{})," Download Backup"]}),W>0&&(0,X.jsx)(C.Z,{percent:W,strokeColor:"#F55C5C"})]})}),(0,X.jsx)(ae,{header:"Reset '".concat(t.name,"-").concat(t.version,"' Database"),children:(0,X.jsxs)(oe,{children:["Reset the database which will result in all data been permanently deleted.",(0,X.jsx)("br",{}),(0,X.jsx)("br",{}),(0,X.jsxs)(y.Z,{appearance:"primary",onClick:function(){return h(!0)},children:[(0,X.jsx)(Z.AMf,{})," Reset Database"]})]})})]}),(0,X.jsx)(g.Z,{children:"Data Management"}),(0,X.jsx)(re,{children:(0,X.jsxs)(ae,{style:{width:"500px"},children:[(0,X.jsxs)(oe,{children:[(0,X.jsxs)(k.Z,{style:{width:"200px"},children:[(0,X.jsx)(k.Z.Addon,{children:"Entity"}),(0,X.jsx)(S.Z,{value:de,onChange:he,data:pe,cleanable:!1})]}),(0,X.jsx)(g.Z,{children:"Filter"}),(0,X.jsxs)(k.Z,{style:{width:"200px"},children:[(0,X.jsx)(k.Z.Addon,{children:"Attribute"}),(0,X.jsx)(S.Z,{value:we,onChange:Ce,data:De,style:{width:150},cleanable:!0})]}),(0,X.jsxs)(k.Z,{style:{width:"200px"},children:[(0,X.jsx)(k.Z.Addon,{children:"="}),(0,X.jsx)(A.Z,{value:Ae,onChange:function(e){return Ee(e)}})]})]}),(0,X.jsx)(se,{}),de&&(0,X.jsxs)(ie,{children:[!we&&(0,X.jsxs)(y.Z,{appearance:"primary",onClick:function(){return R(r,de,"PnPTome_".concat(de,".pnptome"))},disabled:""===de,children:[(0,X.jsx)(Z.u$v,{})," Backup all ",ve," ",de]}),we&&(0,X.jsxs)(y.Z,{appearance:"primary",onClick:function(){return B(r,de,we,Ae,"PnPTome_".concat(de,"_").concat(we,"(").concat(Ae,").pnptome"))},disabled:""===de,children:[(0,X.jsx)(Z.u$v,{})," Backup ",we,"(",Ae,") ",de]}),(0,X.jsx)("br",{}),!we&&(0,X.jsxs)(y.Z,{appearance:"primary",onClick:function(){return(0,P.nV)(r,de)},disabled:""===de,children:[(0,X.jsx)(Z.AMf,{})," Delete all ",ve," ",de]}),we&&(0,X.jsxs)(y.Z,{appearance:"primary",onClick:function(){return(0,P.EZ)(r,de,we,Ae)},disabled:""===de,children:[(0,X.jsx)(Z.AMf,{})," Delete ",we,"(",Ae,") ",de]})]})]})}),(0,X.jsx)(g.Z,{children:"Discord"}),(0,X.jsx)(re,{children:(0,X.jsxs)(ae,{header:"Webhook",children:[(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(k.Z.Addon,{children:"PlayerName"}),(0,X.jsx)(A.Z,{value:Je,onChange:function(e){return Me(e)}})]}),(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(k.Z.Addon,{children:"Webhook"}),(0,X.jsx)(A.Z,{value:Be,onChange:function(e){return Re(e)}})]})]})}),(0,X.jsx)(g.Z,{children:"Theme"}),(0,X.jsx)(re,{children:(0,X.jsxs)(ae,{children:[(0,X.jsxs)(E.Z,{size:"lg",children:[(0,X.jsxs)(y.Z,{onClick:function(){I(!1),localStorage.setItem("theme",JSON.stringify(K.W)),n((0,Q.Dc)(K.W))},children:["Light ",(0,X.jsx)(Z.Mei,{})]}),(0,X.jsxs)(y.Z,{onClick:function(){I(!1),localStorage.setItem("theme",JSON.stringify(K.$)),n((0,Q.Dc)(K.$))},children:["Dark ",(0,X.jsx)(Z.TLr,{})]}),(0,X.jsx)(y.Z,{onClick:function(){I((function(e){return!e}))},children:"Custome"})]}),T&&(0,X.jsxs)(ce,{children:[(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(k.Z.Addon,{children:"Main Color"}),(0,X.jsx)(A.Z,{value:s.mainColor,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{mainColor:e})}))}}),(0,X.jsx)(k.Z.Addon,{children:(0,X.jsx)(le,{color:s.mainColor})})]}),(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(k.Z.Addon,{children:"Secondary Color"}),(0,X.jsx)(A.Z,{value:s.secondColor,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{secondColor:e})}))}}),(0,X.jsx)(k.Z.Addon,{children:(0,X.jsx)(le,{color:s.secondColor})})]}),(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(k.Z.Addon,{children:"Text Color"}),(0,X.jsx)(A.Z,{value:s.textColor,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{textColor:e})}))}}),(0,X.jsx)(k.Z.Addon,{children:(0,X.jsx)(le,{color:s.textColor})})]}),(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(k.Z.Addon,{children:"Secondary Text Color"}),(0,X.jsx)(A.Z,{value:s.secondTextColor,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{secondTextColor:e})}))}}),(0,X.jsx)(k.Z.Addon,{children:(0,X.jsx)(le,{color:s.secondTextColor})})]}),(0,X.jsxs)(k.Z,{children:[(0,X.jsx)(k.Z.Addon,{children:"Highlight"}),(0,X.jsx)(A.Z,{value:s.highlight,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{highlight:e})}))}}),(0,X.jsx)(k.Z.Addon,{children:(0,X.jsx)(le,{color:s.highlight})})]}),(0,X.jsx)(y.Z,{onClick:function(){localStorage.setItem("theme",JSON.stringify(s)),n((0,Q.Dc)(s))},children:"Save and apply"})]})]})})]})})},ne=V.ZP.div(r||(r=(0,h.Z)(["\n  width: 100%;\n  display: flex;\n"]))),te=V.ZP.div(a||(a=(0,h.Z)(["\n  width: 100%;\n"]))),re=V.ZP.div(o||(o=(0,h.Z)(["\n  margin-left: 10px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  justify-content: center;\n"]))),ae=(0,V.ZP)(N.Z)(i||(i=(0,h.Z)(["\n  width: 400px;\n  background-color: ",";\n  border-radius: 10px;\n  box-shadow: ",";\n\n  & .rs-panel-body {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: stretch;\n  }\n\n  & .rs-input-group {\n    margin-bottom: 5px;\n  }\n"])),(function(e){return e.theme.secondColor}),(function(e){return e.theme.mainColor})),oe=V.ZP.div(s||(s=(0,h.Z)(["\n  flex: 1 1;\n"]))),ie=(0,V.ZP)(oe)(c||(c=(0,h.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  gap: 10px;\n"]))),se=V.ZP.div(l||(l=(0,h.Z)(["\n  flex: 1 1;\n  max-width: 1px;\n  margin: 10px;\n  border-left: 1px solid var(--rs-divider-border);\n"]))),ce=V.ZP.div(u||(u=(0,h.Z)(["\n  margin-top: 10px;\n"]))),le=V.ZP.div(d||(d=(0,h.Z)(["\n  height: 20px;\n  width: 20px;\n  border-radius: 30px;\n  background-color: ",";\n"])),(function(e){return e.color}))}}]);
//# sourceMappingURL=427.3d653258.chunk.js.map