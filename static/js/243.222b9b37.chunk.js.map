{"version":3,"file":"static/js/243.222b9b37.chunk.js","mappings":"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","sources":["components/general/BreadCrumbIcon.tsx","components/generic/details/EntityDetailWrapper.tsx","components/generic/details/ToEntity.tsx"],"sourcesContent":["import { useCallback } from \"react\";\nimport { FaHome } from \"react-icons/fa\";\nimport { useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { RootState } from \"../../database/Store\";\nimport { SystemEntity } from \"../../database/SystemReducer\";\nimport { findIcon } from \"../../services/IconService\";\n\nconst BreadCrumbIcon = () => {\n  let location = useLocation();\n  const system = useSelector((state: RootState) => state.system);\n  const base = location.pathname.split(\"/\")[1];\n\n  const makeBreadCrumb = useCallback((): JSX.Element => {\n    let RibbonElm = <></>;\n    system.entities.forEach((entity: SystemEntity) => {\n      switch (true) {\n        case base === \"\":\n        case base === \"home\":\n          RibbonElm = (\n            <Ribbon>\n              <i>\n                <span>\n                  <FaHome />\n                </span>\n              </i>\n            </Ribbon>\n          );\n          break;\n        case base === `${entity.entityName}-detail`:\n        case base === `${entity.entityName}-builder`:\n          RibbonElm = (\n            <Ribbon>\n              <i>\n                <span>{findIcon(entity.icon)}</span>\n              </i>\n            </Ribbon>\n          );\n          break;\n        case base === `${entity.entityName}-overview`:\n          RibbonElm = (\n            <Ribbon>\n              <i>\n                <span>\n                  {findIcon(entity.icon, 10)}\n                  {findIcon(entity.icon, 20)}\n                  {findIcon(entity.icon, 10)}\n                </span>\n              </i>\n            </Ribbon>\n          );\n          break;\n      }\n    });\n    return RibbonElm;\n  }, [base, system]);\n\n  return makeBreadCrumb();\n};\n\nexport default BreadCrumbIcon;\n\nconst Ribbon = styled.div`\n  margin: 3em;\n  /* IE10 Consumer Preview */\n  background-image: -ms-radial-gradient(\n    center top,\n    circle farthest-side,\n    #f55c5c 0%,\n    #c24a4a 100%\n  );\n  /* Mozilla Firefox */\n  background-image: -moz-radial-gradient(\n    center top,\n    circle farthest-side,\n    #f55c5c 0%,\n    #c24a4a 100%\n  );\n  /* Opera */\n  background-image: -o-radial-gradient(\n    center top,\n    circle farthest-side,\n    #f55c5c 0%,\n    #c24a4a 100%\n  );\n  /* Webkit (Safari/Chrome 10) */\n  background-image: -webkit-gradient(\n    radial,\n    center top,\n    0,\n    center top,\n    487,\n    color-stop(0, #f55c5c),\n    color-stop(1, #c24a4a)\n  );\n  /* Webkit (Chrome 11+) */\n  background-image: -webkit-radial-gradient(\n    center top,\n    circle farthest-side,\n    #f55c5c 0%,\n    #c24a4a 100%\n  );\n  /* W3C Markup, IE10 Release Preview */\n  background-image: radial-gradient(\n    circle farthest-side at center top,\n    #f55c5c 0%,\n    #c24a4a 100%\n  );\n  width: 3.5em;\n  height: 3em;\n  position: relative;\n  top: -20px;\n  margin: 0px 10px 0px -10px;\n  border-top-right-radius: 0.2em;\n  border-top-left-radius: 0.2em;\n  font-family: \"Kite One\", sans-serif;\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    bottom: -2.4em;\n    left: 0;\n    width: 0;\n    height: 0;\n    border-top: 2.5em solid #c24a4a;\n    border-right: 2.5em solid transparent;\n  }\n  &:after {\n    content: \"\";\n    position: absolute;\n    bottom: -2.4em;\n    right: 0;\n    width: 0;\n    height: 0;\n    border-top: 2.5em solid #c24a4a;\n    border-left: 2.5em solid transparent;\n  }\n\n  & i {\n    width: 90%;\n    height: 160%;\n    display: block;\n    margin: auto;\n    z-index: 100;\n    position: relative;\n    border-right: dashed 0.0625em #333;\n    border-left: dashed 0.0625em #333;\n    overflow: hidden;\n  }\n\n  & i span {\n    color: #fff;\n    display: block;\n    text-align: center;\n    top: 50%;\n    margin-top: -1em;\n    position: relative;\n    text-shadow: 0.0625em 0.0625em 0.0625em #333;\n    font-style: normal;\n    font-weight: bold;\n  }\n`;\n","import { useState } from \"react\";\nimport { FaArrowLeft, FaClone, FaTrash } from \"react-icons/fa\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button, ButtonGroup, Notification, Modal, toaster } from \"rsuite\";\nimport styled from \"styled-components\";\nimport BreadCrumbIcon from \"../../general/BreadCrumbIcon\";\n\nimport IEntity from \"../../../data/IEntity\";\nimport {\n  remove,\n  updateWithCallback,\n  createNewWithId,\n} from \"../../../services/DatabaseService\";\nimport EntityDetails from \"./EntityDetails\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectDBName } from \"../../../database/SystemReducer\";\nimport { getEntityDetailConfig } from \"../../../services/SystemService\";\nimport { RootState } from \"../../../database/Store\";\nimport { MdScreenShare } from \"react-icons/md\";\nimport Peer, { DataConnection } from \"peerjs\";\nimport { postEvent } from \"../../../services/ChatService\";\nimport { Group } from \"../../../database/GroupReducer\";\nimport {\n  addEvent,\n  EventDto,\n  EventType,\n} from \"../../../database/chatLogReducer\";\n\ninterface $Props {\n  entity: IEntity;\n  entityName: string;\n}\n\nconst EntityDetailWrapper = ({ entity, entityName }: $Props) => {\n  let history = useNavigate();\n  const dispatch = useDispatch();\n  const systemDbName = useSelector(selectDBName);\n  const liveGroup: Group = useSelector((state: RootState) => state.group);\n  const peer: Peer | undefined = useSelector(\n    (state: RootState) => state.peerContext.peer\n  );\n  const conns: DataConnection[] = useSelector(\n    (state: RootState) => state.peerContext.connections\n  );\n  const system = useSelector((state: RootState) => state.system);\n  const [entityObj, editEntity] = useState<IEntity>(entity);\n\n  const [showDeleteDialog, setDeleteDialog] = useState<boolean>(false);\n  const tableName = entityName;\n\n  const deleteEntity = () => {\n    remove(systemDbName, tableName, entityObj.id);\n    history(-1);\n    toaster.push(\n      <Notification closable header={\"Success\"} type=\"success\">\n        Success: Deleted {entityObj.name}.\n      </Notification>,\n      { placement: \"bottomStart\" }\n    );\n  };\n\n  const updateEntity = (entityObj: IEntity, msg: string) => {\n    updateWithCallback(systemDbName, tableName, entityObj, (result) => {\n      if (result > 0) {\n        toaster.push(\n          <Notification closable header={\"Success\"} type=\"success\">\n            Success: {msg}.\n          </Notification>,\n          { placement: \"bottomStart\" }\n        );\n      } else {\n        toaster.push(\n          <Notification closable header={\"Error\"} type=\"error\">\n            Error: Something went wrong!.\n          </Notification>,\n          { placement: \"bottomStart\" }\n        );\n      }\n    });\n  };\n\n  const duplicateEntity = (obj: IEntity) => {\n    let newObj = { ...obj };\n    delete newObj.id;\n    createNewWithId(systemDbName, tableName, newObj, (id) => {\n      editAndSaveEntity(\n        { ...entity, name: entity.name + \" [Clone]\" },\n        \"Cloning successful!\"\n      );\n    });\n  };\n\n  const editAndSaveEntity = (entity: IEntity, msg: string) => {\n    editEntity(entity);\n    updateEntity(entity, msg);\n  };\n\n  const shareEntity = () => {\n    const uuid: string | null = localStorage.getItem(\"playerID\");\n    const ruuid: string = uuid !== null ? uuid : \"\";\n    console.log(ruuid, entityObj);\n    const newEvent: EventDto = {\n      uuid: ruuid,\n      payload: {\n        entityName: entityName,\n        entity: entityObj,\n      },\n      type: EventType.Entity,\n    };\n    dispatch(addEvent(newEvent));\n    postEvent(newEvent, peer, conns);\n  };\n\n  return (\n    <>\n      <Modal open={showDeleteDialog} onClose={() => setDeleteDialog(false)}>\n        <Modal.Header>\n          <Modal.Title>Attention</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          Are you sure you want to delete '{entity.name}'?\n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={() => deleteEntity()} appearance=\"primary\">\n            Yes, delete!\n          </Button>\n          <Button onClick={() => setDeleteDialog(false)} appearance=\"subtle\">\n            Cancel\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <TopBar>\n        <BreadCrumbIcon />\n        <ButtonGroup>\n          <Button onClick={() => history(-1)} size=\"lg\">\n            <FaArrowLeft />\n          </Button>\n          <Button onClick={() => duplicateEntity(entityObj)} size=\"lg\">\n            <FaClone />\n          </Button>\n          <Button onClick={() => setDeleteDialog(true)} size=\"lg\">\n            <FaTrash />\n          </Button>\n        </ButtonGroup>\n        {liveGroup && liveGroup.id !== -1 && (\n          <Button onClick={() => shareEntity()} size=\"lg\">\n            <MdScreenShare />\n          </Button>\n        )}\n      </TopBar>\n      <EntityDetails\n        configs={Object.getOwnPropertyNames(\n          getEntityDetailConfig(system, entityName)\n        )}\n        entity={entityObj}\n        entityName={entityName}\n        isNew={false}\n        onEdit={(value: any) => editAndSaveEntity(value, \"Saved!\")}\n      />\n    </>\n  );\n};\n\nexport default EntityDetailWrapper;\n\nexport const TopBar = styled.div`\n  color: ${({ theme }) => theme.textColor};\n  font-size: 16px;\n  flex: 1 1;\n  width: 100%;\n  max-width: calc(100% - 20px);\n  height: 55px;\n  padding: 10px;\n  display: flex;\n  align-items: flex-start;\n  gap: 5px;\n\n  @media (max-width: 576px) {\n    max-width: calc(100% - 20px);\n  }\n`;\n","import { useCallback, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport Details from \"./EntityDetailWrapper\";\nimport {\n  recivePromise,\n  recivePromiseByAttribute,\n  recivePromiseByMultiAttribute,\n} from \"../../../services/DatabaseService\";\nimport { Loader } from \"rsuite\";\nimport IEntity from \"../../../data/IEntity\";\nimport { useSelector } from \"react-redux\";\nimport { selectDBName } from \"../../../database/SystemReducer\";\n\ninterface $EntityProps {\n  entityName: string;\n}\n\nconst ToEntity = ({ entityName }: $EntityProps) => {\n  const params = useParams();\n  const systemDbName = useSelector(selectDBName);\n  const [entity, setEntity] = useState<IEntity>();\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (entity !== undefined || error) {\n      setLoading(true);\n      setError(false);\n      setEntity(undefined);\n    }\n    // eslint-disable-next-line\n  }, [params]);\n\n  const makeEntity = useCallback(async () => {\n    let nameId: string | undefined = params.name;\n    let newEntity: IEntity | undefined = undefined;\n    var reg = /^\\d+$/;\n    if (nameId !== undefined) {\n      if (!reg.test(nameId)) {\n        let [name, sources] = nameId.split(\"|\");\n        if (sources !== undefined) {\n          newEntity = await recivePromiseByMultiAttribute(\n            systemDbName,\n            entityName,\n            {\n              name: name,\n              sources: sources,\n            }\n          );\n        } else {\n          newEntity = await recivePromiseByAttribute(\n            systemDbName,\n            entityName,\n            \"name\",\n            name\n          );\n        }\n      } else {\n        newEntity = await recivePromise(systemDbName, entityName, +nameId);\n      }\n    }\n    setLoading(false);\n    if (newEntity === undefined) {\n      setError(true);\n    } else {\n      setEntity(newEntity);\n    }\n  }, [params, entityName]);\n\n  useEffect(() => {\n    if (params !== undefined && entity === undefined) {\n      makeEntity();\n    }\n  }, [params, makeEntity, entity]);\n\n  return (\n    <>\n      {loading && <Loader center content=\"Loading...\" />}\n      {!loading && error && <>Error</>}\n      {!error && !loading && entity !== undefined && (\n        <Details entity={entity} entityName={entityName} />\n      )}\n    </>\n  );\n};\n\nexport default ToEntity;\n"],"names":["location","useLocation","system","useSelector","state","base","pathname","split","useCallback","RibbonElm","entities","forEach","entity","Ribbon","entityName","findIcon","icon","makeBreadCrumb","styled","history","useNavigate","dispatch","useDispatch","systemDbName","selectDBName","liveGroup","group","peer","peerContext","conns","connections","useState","entityObj","editEntity","showDeleteDialog","setDeleteDialog","tableName","editAndSaveEntity","msg","updateWithCallback","result","toaster","closable","header","type","placement","updateEntity","open","onClose","name","onClick","remove","id","appearance","TopBar","size","obj","newObj","createNewWithId","duplicateEntity","uuid","localStorage","getItem","ruuid","console","log","newEvent","payload","EventType","addEvent","postEvent","shareEntity","configs","Object","getOwnPropertyNames","getEntityDetailConfig","isNew","onEdit","value","theme","textColor","params","useParams","setEntity","loading","setLoading","error","setError","useEffect","undefined","makeEntity","nameId","newEntity","reg","test","sources","recivePromiseByMultiAttribute","recivePromiseByAttribute","recivePromise","center","content"],"sourceRoot":""}